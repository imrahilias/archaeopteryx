# on system maintenance and stuff
# https://wiki.archlinux.org/index.php/System_maintenance
# https://wiki.archlinux.org/index.php/Pacman/Tips_and_tricks

# The following command can be used to back up the local pacman database:
$ tar -cjf pacman_database_$(date +%y%m%d).tar.bz2 /var/lib/pacman/local

# Keeping a list of explicitly installed packages can be useful to speed up installation on a new system:
$ pacman -Qqe > installed_packages_$(date +%y%m%d)

# Keeping a list of manually installed packages (AUR):
$ pacman -Qm > installed_packages_manually_$(date +%y%m%d)

# The paccache script, provided within the pacman-contrib package, deletes all cached versions of installed and uninstalled packages, except for the most recent 3, by default:
$ paccache -r

# To remove all the cached packages that are not currently installed, and the unused sync database, execute:
$ pacman -Sc

# To remove all files from the cache, use the clean switch twice, this is the most aggressive approach and will leave nothing in the cache folder:
$ pacman -Scc

# delete orphans and dropped packages:
$ pacman -Rns $(pacman -Qtdq)

# Script that identifies files not owned by any package:
$ lostfiles strict

# To quickly list all the broken symlinks of your system, use:
$ find -xtype l -print

# filter the 10 newest and fastest rsync compatible mirrors:
$ reflector -p rsync -f 10 -l 10 --sort rate

# now add the 10 newest htts mirrors:
$ reflector -p https -f 10 -l 10 --sort rate --save /etc/pacman.d/mirrorlist
