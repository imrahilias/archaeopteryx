# EFISTUB write uefi boot entry
# https://wiki.archlinux.org/index.php/EFISTUB

echo 'efibootmgr -c -d /dev/sda -p 1 -w -L "Arch Linux UEFI" -l '/EFI/arch/vmlinuz-linux' -u "root=UUID=$(blkid -s UUID -o value /dev/sda2) rw initrd=/EFI/arch/intel-ucode.img rw initrd=/EFI/arch/initramfs-linux.img"' >> efiboot

#---------- Using UEFI Shell ----------
#
# It is possible to launch an EFISTUB kernel from UEFI Shell as if it is a normal UEFI application. In this case the kernel parameters are passed as normal parameters to the launched EFISTUB kernel file.
#
# > fs0:
# > \vmlinuz-linux  -u root=UUID=ede305dc-3791-4e5b-8ba1-cafa2e0211e2 rw initrd=/initramfs-linux.img
#
# To avoid needing to remember all of your kernel parameters every time, you can save the executable command to a shell script such as archlinux.nsh on your UEFI System Partition, then run it with:
#
# > fs0:
# > archlinux
#
#---------- Using a startup.nsh script ----------
#
# The UEFI Shell Specification 2.0 establishes that a script called startup.nsh at the root of the ESP partition will always be interpreted and can contain arbitrary instructions; among those you can set a bootloading line.
# Make sure you mount the ESP partition on /boot and create a startup.nsh script that contains a kernel bootloading line. For example:
#
#vmlinuz-linux rw root=/dev/sdX [rootfs=myfs] [rootflags=myrootflags] \
# [kernel.flag=foo] [mymodule.flag=bar] \
# [initrd=\intel-ucode.img] initrd=\initramfs-linux.img
# 
#This method will work with almost all UEFI firmware versions you may encounter in real hardware, you can use it as last resort. The script must be a single long line. Sections in brackets are optional and given only as a guide. Shell style linebreaks are for visual clarification only. FAT filesystems use the backslash as path separator and in this case, the backslash declares the initramfs is located in the root of the ESP partition. Only Intel microcode is loaded in the booting parameters line; AMD microcode is read from disk later during the boot process; this is done automatically by the kernel.
#
# vmlinuz-linux -u root=UUID=ede305dc-3791-4e5b-8ba1-cafa2e0211e2 rw initrd=intel-ucode.img rw initrd=initramfs-linux.img